let app={allData:{},previousOrientation:null,isMobile:!1};const database=firebase.database(),functions=firebase.functions();function setReviews(){$(".reviews").html(templates.reviews())}function setSanitation(){$(".sanitation").html(templates.sanitation())}function setGameDetails(){for(let item in home.roomInfo){let roomName=home.roomInfo[item].keyName.toLowerCase();$("#"+roomName+"Room").find(".room_capacity").html(home.roomInfo[item].roomCapacity),$("#"+roomName+"Room").find(".room_diff_info").html(home.roomInfo[item].roomInfo)}}function calculateRoomOrder(){home.roomOrder=[],Object.values(home.roomInfo).forEach((function(item){home.roomOrder.splice(item.roomOrder,0,item.keyName)}))}function setHomeRoomBoxes(){$("#gameBoxes ").html("");let boxItems=[];for(let item of home.roomOrder)boxItems.push(templates.gameBoxes(home.roomInfo[item].boxID,home.roomInfo[item].boxName,home.roomInfo[item].roomName,home.roomInfo[item].roomInfo,home.roomInfo[item].roomCapacity,home.roomInfo[item].backgroundImage,home.roomInfo[item].roomLogo,home.roomInfo[item].tagline));$("#gameBoxes").append(templates.homeBoxStructure(boxItems[0],boxItems[1],boxItems[2],boxItems[3]))}async function getAPIDataForRoomBoxes(){if(header.refreshData){utils.consoleLogger("REFRESHING API DATA");let roomName="davy";for(let item in home.roomInfo){roomName=home.roomInfo[item].keyName.toLowerCase(),console.log(roomName),utils.showLoading("","#"+home.roomInfo[item].boxID,templates.availabilityLoader,roomName+"Loader"),utils.showLoading("","#"+roomName+"Room #"+home.roomInfo[item].boxID,templates.availabilityLoaderRoom,roomName+"LoaderRoom"),$(`#${home.roomInfo[item].boxID} .bookeo_box_room`).hide();let tryAvailability=await apiGet.getAvailability(home.roomInfo[item].productID).then(data=>{home.parseAvailability(data.data,home.roomInfo[item].keyName).then((function(parsedData){home.setAvailability(parsedData,home.roomInfo[item].boxID,home.roomInfo[item].viewName,home.roomInfo[item].roomMaxAvailable),utils.stopLoading(roomName+"Loader"),utils.stopLoading(roomName+"LoaderRoom"),$(`#${home.roomInfo[item].boxID} .bookeo_box_room`).fadeIn()}))});$(`#${home.roomInfo[item].boxID} .learn_button`).off().on("click",(function(e){e.stopPropagation(),viewManager.registerView(home.roomInfo[item].viewName)})),$(`#gameBoxes #${home.roomInfo[item].boxID}`).off().on("click",(function(e){e.cancelBubble=!0,viewManager.registerView(home.roomInfo[item].viewName)}))}header.refreshData=!1}else for(let item in home.roomInfo)home.setAvailability(home.roomInfo[item].availability,home.roomInfo[item].boxID,home.roomInfo[item].viewName,home.roomInfo[item].roomMaxAvailable)}function setWindowChecks(){app.isMobile=utils.checkForMobile(),utils.checkForAndroid(),$(window).on("resize",(function(){app.isMobile=utils.checkForMobile(),utils.checkForAndroid()}))}$(document).ready((function(){utils.showLoading(),app.init()})),app.init=()=>{utils.consoleLogger("Initializing..."),viewManager.startHistoryListener(),setWindowChecks(),app.getAllData().then((function(){calculateRoomOrder(),setHomeRoomBoxes(),setSanitation(),setReviews(),setGameDetails(),getAPIDataForRoomBoxes(),viewManager.registerView("#"+config.urlQuery.view)}))},app.getAllData=()=>new Promise(async(resolve,reject)=>{try{home.roomInfo=await apiGet.getAppData(),resolve(home.roomInfo)}catch(error){console.log(error),reject(error)}});